{% extends "base.html" %}
{% block title %}GRV | Seletor de Empresas{% endblock %}
{% block body %}{% set active_nav = 'grv' %}{{ super() }}{% endblock %}

{% block extra_head %}
{{ super() }}
<style>
  .selector-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 48px 24px;
  }

  .selector-header {
    text-align: center;
    margin-bottom: 48px;
  }

  .selector-header h1 {
    font-size: 36px;
    font-weight: 700;
    color: var(--color-heading, #0f172a);
    margin-bottom: 12px;
  }

  .selector-subtitle {
    font-size: 16px;
    color: var(--color-muted, #6b7280);
    max-width: 600px;
    margin: 0 auto;
  }

  .highlights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 48px;
  }

  .highlight-card {
    background: var(--color-surface, #fff);
    border: 1px solid var(--color-border);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    transition: all 0.2s;
  }

  .highlight-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(15, 23, 42, 0.12);
  }

  .highlight-value {
    font-size: 32px;
    font-weight: 700;
    color: var(--color-accent, #3af1ae);
    margin-bottom: 8px;
  }

  .highlight-label {
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-muted);
  }

  .companies-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 24px;
  }

  .company-card {
    background: #e6f3ff;
    border: 1px solid var(--color-border);
    border-radius: 16px;
    padding: 28px;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }

  .company-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, var(--color-accent, #3af1ae), #10b981);
    transform: scaleX(0);
    transition: transform 0.3s;
  }

  .company-card:hover::before {
    transform: scaleX(1);
  }

  .company-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 16px 32px rgba(15, 23, 42, 0.15);
    border-color: var(--color-accent, #3af1ae);
  }

  .company-name {
    font-size: 20px;
    font-weight: 700;
    color: var(--color-heading);
    margin-bottom: 8px;
  }

  .company-industry {
    font-size: 13px;
    color: var(--color-muted);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .company-stats {
    display: flex;
    gap: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--color-border);
  }

  .company-stat {
    flex: 1;
    text-align: center;
  }

  .company-stat-value {
    font-size: 20px;
    font-weight: 700;
    color: var(--color-heading);
    display: block;
  }

  .company-stat-label {
    font-size: 11px;
    color: var(--color-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 4px;
  }

  .company-actions {
    margin-top: 20px;
    display: flex;
    gap: 8px;
  }

  .empty-state {
    text-align: center;
    padding: 80px 24px;
    color: var(--color-muted);
  }

  .empty-state-icon {
    font-size: 64px;
    margin-bottom: 16px;
    opacity: 0.3;
  }

  .empty-state-title {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--color-heading);
  }

  .empty-state-description {
    font-size: 14px;
    color: var(--color-muted);
    margin-bottom: 24px;
  }
</style>
{% endblock %}

{% block content %}
<div class="selector-container">
  <div class="selector-header">
    <h1>Gest√£o de Rotina da Versus</h1>
    <p class="selector-subtitle">
      Selecione uma empresa para acessar o painel de gest√£o da rotina operacional
    </p>
  </div>

  <div class="highlights-grid">
    <div class="highlight-card">
      <div class="highlight-value">{{ highlights.companies }}</div>
      <div class="highlight-label">Empresas</div>
    </div>
    <div class="highlight-card">
      <div class="highlight-value">{{ highlights.total_projects }}</div>
      <div class="highlight-label">Projetos</div>
    </div>
    <div class="highlight-card">
      <div class="highlight-value">{{ highlights.last_update }}</div>
      <div class="highlight-label">√öltima Atualiza√ß√£o</div>
    </div>
  </div>

  {% if companies %}
  <div class="companies-grid">
    {% for company in companies %}
    <div class="company-card" onclick="window.location.href='{{ url_for('grv.grv_company_dashboard', company_id=company.id) }}'">
      <div class="company-name">{{ company.name or company.legal_name or 'Empresa' }}</div>
      <div class="company-industry">
        <span>üè¢</span>
        <span>{{ company.industry or 'N√£o especificado' }}</span>
      </div>
      <div class="company-stats">
        <div class="company-stat">
          <span class="company-stat-value">{{ company.projects_count or 0 }}</span>
          <span class="company-stat-label">Projetos</span>
        </div>
        <div class="company-stat">
          <span class="company-stat-value">-</span>
          <span class="company-stat-label">Processos</span>
        </div>
      </div>
      <div class="company-actions">
        <button class="button button-primary" style="width: 100%;">
          Acessar Dashboard
        </button>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty-state">
    <div class="empty-state-icon">üè¢</div>
    <h3 class="empty-state-title">Nenhuma empresa cadastrada</h3>
    <p class="empty-state-description">
      Cadastre sua primeira empresa para come√ßar a usar o sistema GRV
    </p>
    <a href="{{ url_for('company_form') }}" class="button button-primary">
      Cadastrar Empresa
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}

