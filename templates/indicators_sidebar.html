{% set nav_groups = [
    {
        'title': 'Indicadores de Performance',
        'items': [
            {
                'id': 'indicators-tree',
                'name': 'Árvore de Indicadores',
                'url': url_for('grv.grv_indicators_tree', company_id=company.id),
                'description': 'Estrutura hierárquica dos indicadores'
            },
            {
                'id': 'indicators-list',
                'name': 'Lista de Indicadores',
                'url': url_for('grv.grv_indicators_list', company_id=company.id),
                'description': 'Visualizar todos os indicadores'
            },
            {
                'id': 'indicators-goals',
                'name': 'Metas dos Indicadores',
                'url': url_for('grv.grv_indicators_goals', company_id=company.id),
                'description': 'Definir e acompanhar metas'
            },
            {
                'id': 'indicators-data',
                'name': 'Dados dos Indicadores',
                'url': url_for('grv.grv_indicators_data', company_id=company.id),
                'description': 'Inserir e visualizar dados'
            },
            {
                'id': 'indicators-analysis',
                'name': 'Análise de Indicadores',
                'url': url_for('grv.grv_indicators_analysis', company_id=company.id),
                'description': 'Dashboards e análises avançadas'
            }
        ]
    },
    {
        'title': 'Voltar',
        'items': [
            {
                'id': 'back-dashboard',
                'name': '← Dashboard Principal',
                'url': url_for('grv.grv_company_dashboard', company_id=company.id),
                'description': 'Voltar para o menu principal'
            }
        ]
    }
] %}

<aside class="project-sidebar surface-card plan-sidebar">
    <span class="project-sidebar-title">Indicadores</span>
    <nav class="project-nav">
        {% for group in nav_groups %}
        <div class="project-nav-group">
            {% if group.title %}
            <span class="project-nav-group-title">{{ group.title }}</span>
            {% endif %}
            {% for item in group.get('items', []) %}
            {% set item_id = item.id %}
            {% set item_url = item.url %}
            {% set is_active = (active_id is defined and active_id == item_id) %}
            <a class="project-nav-link{% if is_active %} is-active{% endif %}"
               href="{{ item_url or '#' }}"
               {% if item.description %}title="{{ item.description }}"{% endif %}>
                <span>{{ item.name }}</span>
            </a>
            {% endfor %}
        </div>
        {% endfor %}
    </nav>
    
    {% if sidebar_meta is defined %}
    <div class="project-hints plan-sidebar-meta">
        {{ sidebar_meta | safe }}
    </div>
    {% elif company is defined and (company.name or company.legal_name) %}
    <div class="project-hints plan-sidebar-meta">
        <span class="summary-eyebrow">Empresa</span>
        <p><strong>{{ company.name or company.legal_name }}</strong></p>
    </div>
    {% endif %}
</aside>
