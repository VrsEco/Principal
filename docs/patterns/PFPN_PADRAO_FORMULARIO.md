# ğŸ“‹ PFPN - PadrÃ£o de FormulÃ¡rio com Pilares de NegÃ³cio

**Nome:** PFPN (PadrÃ£o de FormulÃ¡rio com Pilares de NegÃ³cio)  
**VersÃ£o:** 1.0  
**Data:** 23/10/2025  
**Autor:** Cursor AI  
**Status:** âœ… Aprovado

---

## ğŸ¯ **OBJETIVO**

PadrÃ£o de formulÃ¡rio com **dois modos** (VisualizaÃ§Ã£o e EdiÃ§Ã£o), onde:
- **VisualizaÃ§Ã£o:** Campos com fundo cinza (readonly)
- **EdiÃ§Ã£o:** Campos com fundo branco (editÃ¡vel)

---

## ğŸ¨ **VISUAL**

### **Modo VisualizaÃ§Ã£o (PadrÃ£o):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TÃ­tulo do FormulÃ¡rio  [âœï¸ Editar] [ğŸ—‘ï¸ Excluir] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Campo 1:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ConteÃºdo... (FUNDO CINZA #f1f5f9)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Campo 2:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ConteÃºdo... (FUNDO CINZA #f1f5f9)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Modo EdiÃ§Ã£o:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TÃ­tulo do FormulÃ¡rio                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Campo 1:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ConteÃºdo... (FUNDO BRANCO)          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Campo 2:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ConteÃºdo... (FUNDO BRANCO)          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚        [Cancelar] [Salvar]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ **COMPONENTES**

### **1. CSS**

```css
/* Campos em modo readonly (visualizaÃ§Ã£o) */
textarea.readonly-field,
input.readonly-field {
  background: #f1f5f9 !important;
  cursor: not-allowed;
  color: #475569 !important;
}

textarea.readonly-field:focus,
input.readonly-field:focus {
  border-color: rgba(148, 163, 184, 0.3) !important;
  box-shadow: none !important;
}

/* Campos normais (ediÃ§Ã£o) */
.form-group input,
.form-group textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid rgba(148, 163, 184, 0.3);
  border-radius: 8px;
  background: white;
  color: #0f172a;
  font-size: 14px;
}

.form-group textarea {
  min-height: 80px;
  resize: vertical;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}
```

---

### **2. HTML Template**

```html
<div class="canvas-card canvas-section">
  <h2>
    TÃ­tulo do FormulÃ¡rio
    <div style="display: flex; gap: 8px;">
      <button id="edit-form-btn" class="button button-secondary button-sm" 
              onclick="editarFormulario()" style="display: inline-flex;">
        âœï¸ Editar
      </button>
      <button id="delete-form-btn" class="button button-danger button-sm" 
              onclick="excluirFormulario()" style="display: inline-flex;">
        ğŸ—‘ï¸ Excluir
      </button>
    </div>
  </h2>
  
  <form id="meu-formulario">
    <!-- Campo 1 -->
    <div class="form-group">
      <label for="campo1">Campo 1</label>
      <textarea id="campo1" name="campo1" class="readonly-field" readonly>{{ dados.campo1 or '' }}</textarea>
    </div>
    
    <!-- Campo 2 -->
    <div class="form-group">
      <label for="campo2">Campo 2</label>
      <textarea id="campo2" name="campo2" class="readonly-field" readonly>{{ dados.campo2 or '' }}</textarea>
    </div>
    
    <!-- Campo 3 (lista, um item por linha) -->
    <div class="form-group">
      <label for="campo3">Campo 3 (um por linha)</label>
      <textarea id="campo3" name="campo3" class="readonly-field" readonly>{% if dados.campo3 %}{{ dados.campo3 | join('\n') }}{% endif %}</textarea>
    </div>
    
    <!-- AÃ§Ãµes (oculto por padrÃ£o) -->
    <div class="form-actions" id="form-actions" style="display: none;">
      <button type="button" class="button button-secondary" onclick="cancelarEdicao()">Cancelar</button>
      <button type="submit" class="button button-primary">Salvar</button>
    </div>
  </form>
</div>
```

---

### **3. JavaScript**

```javascript
// IDs dos campos que fazem parte do formulÃ¡rio
const camposFormulario = ['campo1', 'campo2', 'campo3'];

// Armazenar valores originais
let dadosOriginais = {};
camposFormulario.forEach(campo => {
  dadosOriginais[campo] = document.getElementById(campo).value;
});

/**
 * PFPN: FunÃ§Ã£o para entrar no modo de ediÃ§Ã£o
 */
function editarFormulario() {
  // Habilitar todos os campos
  camposFormulario.forEach(campoId => {
    const field = document.getElementById(campoId);
    field.removeAttribute('readonly');
    field.classList.remove('readonly-field');
    field.style.background = 'white';
  });
  
  // Esconder botÃµes editar/excluir
  document.getElementById('edit-form-btn').style.display = 'none';
  document.getElementById('delete-form-btn').style.display = 'none';
  
  // Mostrar aÃ§Ãµes de salvar/cancelar
  document.getElementById('form-actions').style.display = 'flex';
}

/**
 * PFPN: FunÃ§Ã£o para cancelar ediÃ§Ã£o e restaurar valores
 */
function cancelarEdicao() {
  // Restaurar valores originais
  camposFormulario.forEach(campoId => {
    document.getElementById(campoId).value = dadosOriginais[campoId];
  });
  
  // Desabilitar todos os campos
  camposFormulario.forEach(campoId => {
    const field = document.getElementById(campoId);
    field.setAttribute('readonly', true);
    field.classList.add('readonly-field');
    field.style.background = '#f1f5f9';
  });
  
  // Mostrar botÃµes editar/excluir
  document.getElementById('edit-form-btn').style.display = 'inline-flex';
  document.getElementById('delete-form-btn').style.display = 'inline-flex';
  
  // Esconder aÃ§Ãµes
  document.getElementById('form-actions').style.display = 'none';
}

/**
 * PFPN: FunÃ§Ã£o para excluir todos os dados
 */
async function excluirFormulario() {
  if (!confirm('Tem certeza que deseja excluir todos os dados?')) return;
  
  // Limpar campos
  camposFormulario.forEach(campoId => {
    document.getElementById(campoId).value = '';
  });
  
  // Preparar dados vazios
  const data = {};
  camposFormulario.forEach(campoId => {
    data[campoId] = '';
  });
  
  try {
    const response = await fetch(`/api/endpoint`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    
    const result = await response.json();
    
    if (result.success) {
      showMessage('Dados excluÃ­dos com sucesso!', 'success');
      dadosOriginais = data;
    } else {
      showMessage('Erro ao excluir: ' + result.error, 'error');
    }
  } catch (error) {
    showMessage('Erro ao excluir dados', 'error');
  }
}

/**
 * PFPN: Handler do formulÃ¡rio (submit)
 */
document.getElementById('meu-formulario').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  // Coletar dados
  const data = {};
  camposFormulario.forEach(campoId => {
    const value = document.getElementById(campoId).value;
    
    // Se for um campo de lista (um item por linha), converter para array
    if (campoId === 'campo3') {
      data[campoId] = value.split('\n').map(v => v.trim()).filter(v => v.length > 0);
    } else {
      data[campoId] = value;
    }
  });
  
  try {
    const response = await fetch(`/api/endpoint`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    
    const result = await response.json();
    
    if (result.success) {
      showMessage('Dados salvos com sucesso!', 'success');
      
      // Atualizar valores originais
      camposFormulario.forEach(campoId => {
        dadosOriginais[campoId] = document.getElementById(campoId).value;
      });
      
      // Voltar ao modo visualizaÃ§Ã£o
      camposFormulario.forEach(campoId => {
        const field = document.getElementById(campoId);
        field.setAttribute('readonly', true);
        field.classList.add('readonly-field');
        field.style.background = '#f1f5f9';
      });
      
      // Mostrar botÃµes editar/excluir
      document.getElementById('edit-form-btn').style.display = 'inline-flex';
      document.getElementById('delete-form-btn').style.display = 'inline-flex';
      
      // Esconder aÃ§Ãµes
      document.getElementById('form-actions').style.display = 'none';
    } else {
      showMessage('Erro ao salvar: ' + result.error, 'error');
    }
  } catch (error) {
    showMessage('Erro ao salvar dados', 'error');
  }
});

/**
 * PFPN: FunÃ§Ã£o auxiliar para mostrar mensagens
 */
function showMessage(message, type = 'info') {
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 16px 24px;
    border-radius: 8px;
    color: white;
    font-weight: 600;
    z-index: 10000;
    box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  `;
  
  const colors = {
    success: '#10b981',
    error: '#ef4444',
    warning: '#f59e0b',
    info: '#3b82f6'
  };
  
  notification.style.backgroundColor = colors[type] || colors.info;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    if (notification.parentNode) {
      notification.parentNode.removeChild(notification);
    }
  }, 5000);
}
```

---

## ğŸ”„ **FLUXO DE USO**

```
1. PÃ¡gina carrega
   â†“
2. Campos em modo VISUALIZAÃ‡ÃƒO (cinza, readonly)
   â†“
3. UsuÃ¡rio clica "âœï¸ Editar"
   â†“
4. Campos ficam BRANCOS e EDITÃVEIS
   â†“
5. UsuÃ¡rio edita o conteÃºdo
   â†“
6a. Clica "Salvar" â†’ Salva + NotificaÃ§Ã£o + Volta ao cinza
   OU
6b. Clica "Cancelar" â†’ Descarta mudanÃ§as + Volta ao cinza
   OU
6c. Clica "ğŸ—‘ï¸ Excluir" â†’ Confirma + Limpa tudo + Salva vazio
```

---

## âœ… **CHECKLIST DE IMPLEMENTAÃ‡ÃƒO**

Ao aplicar o padrÃ£o PFPN em um novo formulÃ¡rio:

- [ ] Adicionar CSS do padrÃ£o
- [ ] Criar HTML com estrutura correta
- [ ] Definir array `camposFormulario` com IDs dos campos
- [ ] Implementar `editarFormulario()`
- [ ] Implementar `cancelarEdicao()`
- [ ] Implementar `excluirFormulario()`
- [ ] Implementar handler de submit
- [ ] Atualizar endpoint da API
- [ ] Testar fluxo completo (editar â†’ salvar)
- [ ] Testar fluxo de cancelamento
- [ ] Testar fluxo de exclusÃ£o

---

## ğŸ“ **EXEMPLO DE APLICAÃ‡ÃƒO**

### **Arquivo:** `templates/meu_formulario.html`

```html
<!-- CSS -->
<style>
  textarea.readonly-field,
  input.readonly-field {
    background: #f1f5f9 !important;
    cursor: not-allowed;
    color: #475569 !important;
  }
  /* ... resto do CSS do padrÃ£o ... */
</style>

<!-- HTML -->
<div class="canvas-card canvas-section">
  <h2>
    Meus Dados
    <div style="display: flex; gap: 8px;">
      <button id="edit-form-btn" class="button button-secondary button-sm" 
              onclick="editarFormulario()">âœï¸ Editar</button>
      <button id="delete-form-btn" class="button button-danger button-sm" 
              onclick="excluirFormulario()">ğŸ—‘ï¸ Excluir</button>
    </div>
  </h2>
  
  <form id="meu-formulario">
    <div class="form-group">
      <label for="nome">Nome</label>
      <input type="text" id="nome" class="readonly-field" readonly 
             value="{{ dados.nome or '' }}">
    </div>
    
    <div class="form-group">
      <label for="descricao">DescriÃ§Ã£o</label>
      <textarea id="descricao" class="readonly-field" readonly>{{ dados.descricao or '' }}</textarea>
    </div>
    
    <div class="form-actions" id="form-actions" style="display: none;">
      <button type="button" class="button button-secondary" 
              onclick="cancelarEdicao()">Cancelar</button>
      <button type="submit" class="button button-primary">Salvar</button>
    </div>
  </form>
</div>

<!-- JavaScript -->
<script>
  const camposFormulario = ['nome', 'descricao'];
  
  let dadosOriginais = {};
  camposFormulario.forEach(campo => {
    dadosOriginais[campo] = document.getElementById(campo).value;
  });
  
  // ... resto do JavaScript do padrÃ£o ...
</script>
```

---

## ğŸ¨ **CORES E ESTILOS**

| Elemento | Cor/Estilo |
|----------|-----------|
| Fundo readonly | `#f1f5f9` (cinza claro) |
| Fundo editÃ¡vel | `white` |
| Texto readonly | `#475569` (cinza escuro) |
| Texto editÃ¡vel | `#0f172a` (preto) |
| Borda normal | `rgba(148, 163, 184, 0.3)` |
| Borda focus | `#3b82f6` (azul) |
| Shadow focus | `rgba(59, 130, 246, 0.1)` |

---

## ğŸ“‹ **VARIAÃ‡Ã•ES**

### **VariaÃ§Ã£o 1: Com validaÃ§Ã£o**
```javascript
document.getElementById('meu-formulario').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  // Validar campos obrigatÃ³rios
  if (!document.getElementById('campo1').value.trim()) {
    showMessage('Campo 1 Ã© obrigatÃ³rio!', 'error');
    return;
  }
  
  // ... resto do cÃ³digo ...
});
```

### **VariaÃ§Ã£o 2: Sem botÃ£o Excluir**
```html
<h2>
  TÃ­tulo do FormulÃ¡rio
  <button id="edit-form-btn" class="button button-secondary button-sm" 
          onclick="editarFormulario()">âœï¸ Editar</button>
</h2>
```

### **VariaÃ§Ã£o 3: Com confirmaÃ§Ã£o ao salvar**
```javascript
if (!confirm('Deseja salvar as alteraÃ§Ãµes?')) return;
```

---

## ğŸš€ **BENEFÃCIOS DO PADRÃƒO**

1. âœ… **ConsistÃªncia:** Mesmo comportamento em todos os formulÃ¡rios
2. âœ… **UX profissional:** Estados visuais claros
3. âœ… **SeguranÃ§a:** ConfirmaÃ§Ã£o antes de excluir
4. âœ… **Reversibilidade:** Cancelar mudanÃ§as a qualquer momento
5. âœ… **Simplicidade:** CÃ³digo reutilizÃ¡vel e fÃ¡cil de manter
6. âœ… **Feedback claro:** NotificaÃ§Ãµes de sucesso/erro

---

## ğŸ“š **REFERÃŠNCIAS**

- Implementado em: `templates/implantacao/alinhamento_canvas_expectativas.html`
- DocumentaÃ§Ã£o original: `MELHORIA_UX_ALINHAMENTO.md`
- Data de criaÃ§Ã£o: 23/10/2025

---

**VersÃ£o:** 1.0  
**Ãšltima atualizaÃ§Ã£o:** 23/10/2025  
**Status:** âœ… Aprovado para uso em produÃ§Ã£o

